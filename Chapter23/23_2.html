<!DOCTYPE html>
<html>
  <head>
    <title>Пример геолокации</title>
  </head>
  <body>
    <script>
      if (typeof navigator.geolocation == 'undefined')
        alert("Геолокация не поддерживается.")
      else
        navigator.geolocation.getCurrentPosition(granted, denied)

      function granted(position)
      {
        var lat = position.coords.latitude
        var long = position.coords.longitude

        alert("Разрешение дано. Ваше местоположение:\n\n" + lat + "," + long + "\n\nЩелкните на кнопке 'ОК' для загрузки Google Maps с вашим местоположением")

        window.location.replace("https://www.google.com/maps/@" + lat + "," + long + ",14z")
      }

      function denied(error)
      {
          var message

          switch(error.code)
          {
            case 1: message = 'Доступ запрещен'; break;
            case 2: message = 'Позиция недоступна'; break;
            case 3: message = 'Время ожидания операции истекло'; break;
            case 4: message = 'Неизвестная ошибка'; break;
          }

          alert("Ошибка геолокации: " + message)
      }
    </script>
  </body>
</html>
